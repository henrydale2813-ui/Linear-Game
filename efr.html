<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Linear</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
body { margin:0; padding:0; font-family:'Press Start 2P', cursive; background: linear-gradient(45deg, red, yellow); color:#fff; text-align:center; }
h1 { font-size:36px; text-transform:uppercase; letter-spacing:4px; text-shadow:3px 3px 0px #000,6px 6px 0px #ff0000; margin:20px 0; }
button { font-family:'Press Start 2P', cursive; background:#111; color:#fff; border:3px solid #ff0000; padding:10px 16px; margin:5px; cursor:pointer; text-transform:uppercase; letter-spacing:2px; box-shadow:3px 3px 0px #ff0000; transition: all 0.15s ease; }
button:hover { background:#ff0000; color:#000; box-shadow:3px 3px 0px #000; transform:translate(-2px,-2px); }
button:active { transform:translate(2px,2px); box-shadow:none; }
.slot { background:#222; border:3px solid #fff; padding:10px; margin:10px 0; box-shadow:3px 3px 0px #000; color:#fff; text-align:center; }
#itemSlots,#petSlots,#boostShop { background: rgba(0,0,0,0.6); padding:15px; border:3px solid #fff; margin:20px; box-shadow:5px 5px 0px #000; }
#notifications { position:fixed; top:20px; right:20px; z-index:999; }
.notification { background:#000; color:#fff; border:3px solid #ff0000; padding:10px; margin-top:10px; box-shadow:3px 3px 0px #ff0000; animation: popup 0.3s ease, fadeout 3s ease forwards; text-transform:uppercase; letter-spacing:2px; }
@keyframes popup { from{transform:scale(0.5);opacity:0;} to{transform:scale(1);opacity:1;} }
@keyframes fadeout { 0%{opacity:1;} 80%{opacity:1;} 100%{opacity:0; transform:translateY(-20px);} }
#adminArea { display:none; margin:20px; background:#000; padding:10px; border:3px solid #fff; }
.timer { margin-bottom:10px; font-size:14px; color:#fff; }
</style>
</head>
<body>
<h1>Linear</h1>
<div>Money: $<span id="money">0</span></div>
<div>Income/sec: <span id="income">0</span></div>
<div>Boost: <span id="boostStatus">None</span></div>
<div>Tick Speed: <span id="tickIntervalDisplay">1.0s</span> (<span id="tickBoostStatus">Normal</span>)</div>

<!-- Spotify background music -->
<button id="playMusicBtn">Press Me and Then Press Play</button>
<div style="margin-top:10px;">
  <iframe id="spotifyPlayer" style="border-radius:12px; display:none;" src="https://open.spotify.com/embed/track/5Cw6SX4MtdaOvM0GbN5g7j?utm_source=generator" width="100%" height="80" frameborder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>
</div>

<div id="boostShop">
  <h2>Boost Shop</h2>
  <button id="buyBoost">Buy 2x Income Boost ($1000)</button>
  <button id="buyTickBoost">Buy Tick Boost ($1,000,000+)</button>
</div>

<button id="openAdmin">Admin</button>
<button id="saveBtn">Save</button>
<button id="loadBtn">Load</button>
<button id="reportBug">Report a Bug</button>
<div id="lastSaved"></div>

<h2>Shop - Items</h2>
<div class="timer">Refresh in <span id="itemTimer">120</span>s</div>
<div id="itemSlots"></div>

<h2>Shop - Pets</h2>
<div class="timer">Refresh in <span id="petTimer">120</span>s</div>
<div id="petSlots"></div>

<h2>Owned Items</h2>
<ul id="itemsList"></ul>
<h2>Owned Pets</h2>
<ul id="petsList"></ul>

<div id="adminArea">
  <h3>Admin Panel</h3>
  <input id="adminCmdInput" placeholder="Enter command">
  <button id="runAdmin">Run</button>
  <p>Commands: <code>giveMoney &lt;amount&gt;</code>, <code>forceItem &lt;rarity&gt;</code>, <code>forceEgg &lt;rarity&gt;</code></p>
</div>

<div id="notifications"></div>

<script>
let money=10, autoIncome=0, multiplier=1;
let tickInterval=1000, tickBoostCost=1000000, boostActiveUntil=null;
let shopCountdown=120, petShopCountdown=120;

const rarities=[
  {name:'Common',bonus:1,cost:10,color:'white',chance:40},
  {name:'Uncommon',bonus:10,cost:100,color:'lime',chance:20},
  {name:'Rare',bonus:50,cost:1000,color:'aqua',chance:15},
  {name:'Epic',bonus:100,cost:10000,color:'violet',chance:10},
  {name:'Legendary',bonus:500,cost:50000,color:'orange',chance:5},
  {name:'Mythic',bonus:1000,cost:75000,color:'magenta',chance:3},
  {name:'Insane',bonus:10000,cost:100000,color:'red',chance:1},
  {name:'Godly',bonus:50000,cost:500000,color:'gold',chance:0.4},
  {name:'Crazy',bonus:100000,cost:1000000,color:'cyan',chance:0.1}
];

const itemNames=['Sword','Shield','Helmet','Armor','Boots','Amulet','Ring'];
let itemsOwned=[], petsOwned=[], currentItemSlots=[], currentPetSlots=[];

const moneyEl=document.getElementById('money'), incomeEl=document.getElementById('income'),
boostStatusEl=document.getElementById('boostStatus'), tickBoostStatusEl=document.getElementById('tickBoostStatus'),
tickIntervalDisplayEl=document.getElementById('tickIntervalDisplay'),
itemSlotsEl=document.getElementById('itemSlots'), petSlotsEl=document.getElementById('petSlots'),
itemsListEl=document.getElementById('itemsList'), petsListEl=document.getElementById('petsList'),
itemTimerEl=document.getElementById('itemTimer'), petTimerEl=document.getElementById('petTimer');

function showNotification(text){
  const note=document.createElement('div'); note.className='notification'; note.textContent=text;
  document.getElementById('notifications').appendChild(note); setTimeout(()=>note.remove(),3000);
}

function getRandomRarity(){ const roll=Math.random()*100; let sum=0;
  for(const r of rarities){ sum+=r.chance; if(roll<=sum) return r; } return rarities[0];
}

// ---- Shops ----
function fillItemSlots(){ currentItemSlots=[];
  for(let i=0;i<4;i++){ const r=getRandomRarity(); const name=itemNames[Math.floor(Math.random()*itemNames.length)];
    currentItemSlots.push({name,rarityName:r.name,bonus:r.bonus,cost:r.cost,color:r.color,bought:false}); }
}
function fillPetSlots(){ currentPetSlots=[];
  for(let i=0;i<3;i++){ const r=getRandomRarity();
    currentPetSlots.push({rarityName:r.name,bonus:r.bonus,cost:r.cost,color:r.color,bought:false}); }
}

function renderShops(){
  itemSlotsEl.innerHTML=''; petSlotsEl.innerHTML='';
  currentItemSlots.forEach(slot=>{
    const div=document.createElement('div'); div.className='slot';
    div.innerHTML=`<b style="color:${slot.color}">${slot.rarityName} ${slot.name}</b> (+${slot.bonus}/sec) - $${slot.cost}`;
    const btn=document.createElement('button'); btn.textContent=slot.bought?'Bought':'Buy'; btn.disabled=slot.bought;
    btn.onclick=()=>{
      if(slot.bought||money<slot.cost) return alert('Cannot buy');
      money-=slot.cost; autoIncome+=slot.bonus; slot.bought=true; itemsOwned.push(slot);
      renderItemsOwned(); showNotification(`Bought ${slot.rarityName} ${slot.name}`); updateDisplay(); renderShops();
    }; div.appendChild(btn); itemSlotsEl.appendChild(div);
  });
  currentPetSlots.forEach(slot=>{
    const div=document.createElement('div'); div.className='slot';
    div.innerHTML=`<b style="color:${slot.color}">${slot.rarityName} Egg</b> - $${slot.cost}`;
    const btn=document.createElement('button'); btn.textContent=slot.bought?'Hatched':'Hatch'; btn.disabled=slot.bought;
    btn.onclick=()=>{
      if(slot.bought||money<slot.cost) return alert('Cannot hatch');
      money-=slot.cost; const idx=rarities.findIndex(r=>r.name===slot.rarityName);
      const pet={rarityName:rarities[idx].name,bonus:rarities[idx].bonus,color:rarities[idx].color};
      petsOwned.push(pet); autoIncome+=pet.bonus; slot.bought=true;
      renderPetsOwned(); showNotification(`Hatched a ${pet.rarityName} Pet (+${pet.bonus}/sec)`); updateDisplay(); renderShops();
    }; div.appendChild(btn); petSlotsEl.appendChild(div);
  });
}

function renderItemsOwned(){ itemsListEl.innerHTML=''; itemsOwned.forEach(it=>{ const li=document.createElement('li'); li.textContent=`${it.name} (${it.rarityName}) +${it.bonus}/sec`; li.style.color=it.color; itemsListEl.appendChild(li); }); }
function renderPetsOwned(){ petsListEl.innerHTML=''; petsOwned.forEach(p=>{ const li=document.createElement('li'); li.textContent=`${p.rarityName} Pet (+${p.bonus}/sec)`; li.style.color=p.color; petsListEl.appendChild(li); }); }

// ---- Tick ----
let lastTick=Date.now(); function tick(){ const now=Date.now(); if(now-lastTick>=tickInterval){ money+=autoIncome*multiplier; lastTick=now; updateDisplay(); } } setInterval(tick,50);

// ---- Display ----
function updateDisplay(){ moneyEl.textContent=Math.floor(money); incomeEl.textContent=Math.floor(autoIncome*multiplier); boostStatusEl.textContent=boostActiveUntil&&Date.now()<boostActiveUntil?'Active':'None'; tickBoostStatusEl.textContent=tickInterval<1000?'Boosted':'Normal'; tickIntervalDisplayEl.textContent=(tickInterval/1000).toFixed(1)+'s'; }

// ---- Boosts ----
let boostCooldown=0, boostTimer=0; setInterval(()=>{ if(boostCooldown>0) boostCooldown--; if(boostTimer>0) boostTimer--; document.getElementById('buyBoost').textContent=`Buy 2x Income Boost ($1000) - ${boostCooldown}s cooldown`; },1000);
document.getElementById('buyBoost').onclick=()=>{ if(boostCooldown>0||money<1000) return alert('Cannot buy'); money-=1000; multiplier*=2; boostActiveUntil=Date.now()+5*60*1000; boostCooldown=15*60; boostTimer=5*60; showNotification('2x Income Boost Activated for 5 minutes!'); };
document.getElementById('buyTickBoost').onclick=()=>{ if(money<tickBoostCost) return alert('Not enough money'); money-=tickBoostCost; tickBoostCost+=1000000; tickInterval=Math.max(100,tickInterval-100); showNotification('Tick Speed Boost Purchased!'); updateDisplay(); };

// ---- Admin ----
document.getElementById('openAdmin').onclick=()=>{ const code=prompt('Enter admin password:'); if(code==='UnlikeMe') document.getElementById('adminArea').style.display='block'; else alert('Wrong password!'); };
document.getElementById('runAdmin').onclick=()=>{
  const input=document.getElementById('adminCmdInput').value.trim().split(/\s+/); if(!input.length) return alert('Enter a command');
  const cmd=input[0].toLowerCase();
  if(cmd==='givemoney'||cmd==='addmoney'){ const amt=parseInt(input[1]); if(isNaN(amt)) return alert('Invalid'); money+=amt; showNotification(`Added $${amt}`);}
  else if(cmd==='forceitem'){ const r=rarities.find(x=>x.name.toLowerCase()===input[1].toLowerCase()); if(!r) return alert('Invalid rarity'); const name=itemNames[Math.floor(Math.random()*itemNames.length)]; const worstIdx=currentItemSlots.findIndex(s=>!s.bought?s.cost:Infinity); if(worstIdx!==-1){ currentItemSlots[worstIdx]={name,rarityName:r.name,bonus:r.bonus,cost:r.cost,color:r.color,bought:false}; showNotification(`Forced ${r.name} ${name} into shop`);} renderShops();}
  else if(cmd==='forceegg'){ const r=rarities.find(x=>x.name.toLowerCase()===input[1].toLowerCase()); if(!r) return alert('Invalid rarity'); const worstIdx=currentPetSlots.findIndex(s=>!s.bought?s.cost:Infinity); if(worstIdx!==-1){ currentPetSlots[worstIdx]={rarityName:r.name,bonus:r.bonus,cost:r.cost,color:r.color,bought:false}; showNotification(`Forced ${r.name} Egg into shop`);} renderShops();}
  else alert('Unknown command');
};

// ---- Report Bug ----
document.getElementById('reportBug').onclick = () => { const msg = prompt('Describe the bug:'); if(msg){ const email = 'henrydale2813@student.lvusd.org'; const subject = encodeURIComponent('Bug Report (Linear)'); const body = encodeURIComponent(msg); window.open(`https://mail.google.com/mail/?view=cm&fs=1&to=${email}&su=${subject}&body=${body}`, '_blank'); }; };

// ---- Save / Load ----
function saveGame(){ localStorage.setItem('linear_save',JSON.stringify({money,autoIncome,multiplier,tickInterval,itemsOwned,petsOwned,currentItemSlots,currentPetSlots,boostActiveUntil})); document.getElementById('lastSaved').textContent='Last saved: '+new Date().toLocaleString(); }
function loadGame(){ const raw=localStorage.getItem('linear_save'); if(!raw) return alert('No save found'); const data=JSON.parse(raw); money=data.money||10; autoIncome=data.autoIncome||0; multiplier=data.multiplier||1; tickInterval=data.tickInterval||1000; itemsOwned=data.itemsOwned||[]; petsOwned=data.petsOwned||[]; currentItemSlots=data.currentItemSlots||[]; currentPetSlots=data.currentPetSlots||[]; boostActiveUntil=data.boostActiveUntil||null; renderItemsOwned(); renderPetsOwned(); renderShops(); updateDisplay(); }
document.getElementById('saveBtn').onclick=saveGame; document.getElementById('loadBtn').onclick=loadGame;

// ---- Spotify Play ----
document.getElementById('playMusicBtn').onclick=()=>{ document.getElementById('spotifyPlayer').style.display='block'; showNotification('Scroll down and press Play in Spotify player!'); };

// ---- Shop Timers ----
setInterval(()=>{
  shopCountdown--; petShopCountdown--;
  itemTimerEl.textContent = shopCountdown;
  petTimerEl.textContent = petShopCountdown;
  if(shopCountdown<=0){ shopCountdown=120; fillItemSlots(); renderShops(); }
  if(petShopCountdown<=0){ petShopCountdown=120; fillPetSlots(); renderShops(); }
},1000);

// ---- Init ----
fillItemSlots(); fillPetSlots(); renderShops(); renderItemsOwned(); renderPetsOwned(); updateDisplay();
</script>
</body>
</html>

